<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Game Hitung Gambar Anak</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(to bottom right, #e0f7fa, #fce4ec);
      text-align: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
    }

    h1 {
      color: #d6336c;
      text-shadow: 1px 1px white;
    }

    .level {
      font-size: 1.2rem;
      margin-bottom: 15px;
    }

    .target-image {
      width: 100px;
      height: 100px;
      margin: 10px auto;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      border: 3px solid #ff6f91;
      border-radius: 12px;
    }

    #imageContainer {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }

    .item-img {
      width: 60px;
      height: 60px;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }

    .choices {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .choice-btn {
      padding: 10px 20px;
      font-size: 1.2rem;
      border: none;
      border-radius: 10px;
      background-color: #ff6f91;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }

    .choice-btn:hover {
      background-color: #ff4770;
    }

    #message {
      font-weight: bold;
      font-size: 1.2rem;
      color: #2e8b57;
      margin-bottom: 10px;
    }

    #nextLevelBtn {
      display: none;
      padding: 10px 25px;
      font-size: 1rem;
      background-color: #38b000;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    #nextLevelBtn:hover {
      background-color: #2a8000;
    }
  </style>
</head>
<body>

  <h1>üéØ Game Hitung Gambar</h1>
  <div class="level" id="levelLabel">Level 1</div>
  <div>Hitung jumlah gambar berikut:</div>
  <div class="target-image" id="targetImage"></div>
  <div id="imageContainer"></div>
  <div class="choices" id="choicesContainer"></div>
  <div id="message"></div>
  <button id="nextLevelBtn">Lanjut ke Level Berikutnya ‚û°Ô∏è</button>

  <script>
    const categories = [
      { name: "apel", img: "https://cdn-icons-png.flaticon.com/512/590/590685.png" },
      { name: "pisang", img: "https://cdn-icons-png.flaticon.com/512/590/590673.png" },
      { name: "semangka", img: "https://cdn-icons-png.flaticon.com/512/590/590701.png" },
      { name: "kucing", img: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
      { name: "anjing", img: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
      { name: "sapi", img: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
      { name: "mobil", img: "https://cdn-icons-png.flaticon.com/512/743/743007.png" },
      { name: "bus", img: "https://cdn-icons-png.flaticon.com/512/1995/1995470.png" },
      { name: "truk", img: "https://cdn-icons-png.flaticon.com/512/1995/1995473.png" }
    ];

    let level = 1;
    let usedIndexes = new Set();
    const maxLevel = categories.length;
    const targetImageDiv = document.getElementById("targetImage");
    const imageContainer = document.getElementById("imageContainer");
    const choicesContainer = document.getElementById("choicesContainer");
    const message = document.getElementById("message");
    const nextLevelBtn = document.getElementById("nextLevelBtn");
    const levelLabel = document.getElementById("levelLabel");

    function startLevel() {
      message.textContent = "";
      nextLevelBtn.style.display = "none";
      levelLabel.textContent = `Level ${level}`;
      imageContainer.innerHTML = "";
      choicesContainer.innerHTML = "";

      // Pilih kategori yang belum dipakai
      let index;
      do {
        index = Math.floor(Math.random() * categories.length);
      } while (usedIndexes.has(index));

      usedIndexes.add(index);
      const target = categories[index];
      targetImageDiv.style.backgroundImage = `url(${target.img})`;

      // Tentukan jumlah target (2-5) dan jumlah tambahan random
      const correctCount = Math.floor(Math.random() * 4) + 2;
      const distractorCount = Math.floor(Math.random() * 4) + 1;
      const totalImages = [];

      // Tambahkan gambar target
      for (let i = 0; i < correctCount; i++) {
        totalImages.push({ img: target.img, name: target.name });
      }

      // Tambahkan gambar acak lainnya
      while (totalImages.length < correctCount + distractorCount) {
        const random = categories[Math.floor(Math.random() * categories.length)];
        if (random.name !== target.name) {
          totalImages.push({ img: random.img, name: random.name });
        }
      }

      // Acak posisi gambar
      totalImages.sort(() => 0.5 - Math.random());

      // Tampilkan gambar
      totalImages.forEach(item => {
        const div = document.createElement("div");
        div.className = "item-img";
        div.style.backgroundImage = `url(${item.img})`;
        imageContainer.appendChild(div);
      });

      // Buat pilihan jawaban
      const options = generateOptions(correctCount);
      options.forEach(opt => {
        const btn = document.createElement("button");
        btn.className = "choice-btn";
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(opt, correctCount);
        choicesContainer.appendChild(btn);
      });
    }

    function generateOptions(correct) {
      const set = new Set([correct]);
      while (set.size < 4) {
        const val = correct + Math.floor(Math.random() * 5) - 2;
        if (val > 0) set.add(val);
      }
      return Array.from(set).sort(() => Math.random() - 0.5);
    }

    function checkAnswer(selected, correct) {
      if (selected === correct) {
        message.textContent = "‚úÖ Benar sekali!";
        nextLevelBtn.style.display = level < maxLevel ? "inline-block" : "none";
      } else {
        message.textContent = "‚ùå Salah, coba lagi ya!";
      }
    }

    nextLevelBtn.addEventListener("click", () => {
      level++;
      startLevel();
    });

    startLevel();
  </script>
</body>
</html>
